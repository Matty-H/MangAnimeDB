<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sademaru</title>
    <script>
      (function () {
        const themes = [
          "light", "cupcake", "bumblebee", "emerald", "corporate",
          "synthwave", "retro", "cyberpunk", "valentine", "halloween", "garden",
          "forest", "lofi", "pastel", "fantasy", "wireframe",
          "luxury", "dracula", "cmyk", "autumn", "business",
          "night", "coffee", "winter", "dim", "nord", "sunset", "caramellatte", "silk"
        ];
        const randomTheme = themes[Math.floor(Math.random() * themes.length)];
        document.documentElement.setAttribute("data-theme", randomTheme);
        window.selectedTheme = randomTheme; // rendre le thème accessible globalement
      })();
    </script>
  </head>
  <body>
    <script>
      // Intercepter les appels fetch qui contiennent beaexn.fr
      const originalFetch = window.fetch;
      window.fetch = function(url, options) {
        if (typeof url === 'string' && url.includes('beaexn.fr')) {
          console.log('Requête interceptée vers:', url);
          console.trace('Stack trace:');
          // Vous pourriez rediriger ici
          url = url.replace('beaexn.fr', 'lilite.be');
        }
        return originalFetch.call(this, url, options);
      };
    
      // De même pour XMLHttpRequest
      const originalOpen = XMLHttpRequest.prototype.open;
      XMLHttpRequest.prototype.open = function(method, url, ...rest) {
        if (typeof url === 'string' && url.includes('beaexn.fr')) {
          console.log('XHR interceptée vers:', url);
          console.trace('Stack trace:');
          // Vous pourriez rediriger ici
          url = url.replace('beaexn.fr', 'lilite.be');
        }
        return originalOpen.call(this, method, url, ...rest);
      };
    </script>
    <div id="root"></div>
    <script type="module" src="frontend/src/main.tsx"></script>
  </body>
</html>
